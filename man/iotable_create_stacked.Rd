% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/iotable_create.R
\name{iotable_create_stacked}
\alias{iotable_create_stacked}
\title{Create a stacked SIOT with optional Q1 "fence" totals}
\usage{
iotable_create_stacked(
  q1,
  q2,
  q3,
  q1_id,
  final_use_id,
  primary_id,
  id_col = "prod_na",
  fence_q1 = FALSE,
  fence_row_label = "intermediate_consumption",
  fence_col_label = "total"
)
}
\arguments{
\item{q1}{Numeric \verb{n×n} matrix (Z). Row/col names are \code{q1_id}.}

\item{q2}{Numeric \verb{n×k} matrix (Y). Row names = \code{q1_id}.}

\item{q3}{Numeric \verb{m×n} matrix (V). Col names = \code{q1_id}.}

\item{q1_id}{Character vector of industries/products (len \code{n}).}

\item{final_use_id}{Character vector of final-use cols (len \code{k}).}

\item{primary_id}{Character vector of primary-input rows (len \code{m}).}

\item{id_col}{Name of the identifier column in the tibble.}

\item{fence_q1}{Logical; add Q1 total row/col when \code{TRUE}. Default \code{FALSE}.}

\item{fence_row_label}{Label for Q1 total row (default
\code{"intermediate_consumption"}).}

\item{fence_col_label}{Label for Q1 total column (default \code{"total"}).}
}
\value{
A tibble with rows = industries + (optional fence row) + primary inputs;
columns = \code{id_col}, industries + (optional fence col) + final demand.
Quadrant 4 is \code{NA_real_}. Attributes:
\itemize{
\item \code{quadrants$q1}, \code{quadrants$q2} (column indices),
\item \code{quadrants$q3} (row labels of primary inputs),
\item \code{fence$row_label}, \code{fence$col_label} when present,
\item \code{id_col}.
}
}
\description{
Build a stacked SIOT:
\itemize{
\item Q1 (\strong{Z}): industries × industries.
\item Q2 (\strong{Y}): industries × final demand.
\item Q3 (\strong{V}): primary inputs × industries (stacked as rows).
\item Q4: primary inputs × final demand (filled with \code{NA_real_}).
}

Optionally "fence" Q1 by adding:
\itemize{
\item a total \strong{column} with \code{colSums(Z)} (label \code{fence_col_label});
\item a total \strong{row} with \code{rowSums(Z)} (label \code{fence_row_label}).
}
}
\examples{
ids <- c("p1", "p2")
fin <- c("hfce", "gfcf")
pri <- c("va", "taxes")
q1 <- matrix(c(10, 2, 3, 15), 2, byrow = TRUE, dimnames = list(ids, ids))
q2 <- matrix(c(5, 7, 8, 9), 2, dimnames = list(ids, fin))
q3 <- matrix(c(12, 14, 6, 11), 2, byrow = TRUE, dimnames = list(pri, ids))
siot <- iotable_create_stacked(q1, q2, q3, ids, fin, pri,
  fence_q1 = TRUE
)
}
